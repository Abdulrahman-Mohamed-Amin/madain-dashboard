<div class="edit-page mt-4">

  <div class="d-flex justify-content-between align-items-center mb-3">
    <div class="crumbs">ููุญุฉ ุงูุชุญูู <span>โบ</span> ุชุนุฏูู ุฎุฏูุฉ</div>

    <button class="btn btn-primary" type="submit" form="editForm">
      ุญูุธ
    </button>
  </div>

  <h3 class="text-center mb-4">ุชุนุฏูู ุฎุฏูุฉ</h3>


  <div class="d-flex align-items-center ">
    <!-- โ ุงูููุฑู ููู -->
    <form id="editForm" class="card" [formGroup]="editForm" (ngSubmit)="submit()">
      <div class="row g-3">

        <div class="col-12 col-lg-6">
          <label class="form-label">ุงุณู ุงูุฎุฏูุฉ ุจุงูุนุฑุจู <span>*</span></label>
          <input type="text" class="form-control" formControlName="arTitle"
            [class.invalid]="(submitted && editForm.get('arTitle')?.invalid) && editForm.get('arTitle')?.touched">
          @if(editForm.get('arTitle')?.errors?.['pattern']){
          <div class="error">ูุบุฉ ุงูุงุฏุฎุงู ุงูุตุญูุญุฉ ูู ุงูุนุฑุจูุฉ</div>
          }
        </div>

        <div class="col-12 col-lg-6">
          <label class="form-label">ุงุณู ุงูุฎุฏูุฉ ุจุงูุงูุฌููุฒู <span>*</span></label>
          <input type="text" class="form-control" formControlName="enTitle"
            [class.invalid]="(submitted && editForm.get('enTitle')?.invalid) && editForm.get('enTitle')?.touched">
          @if(editForm.get('enTitle')?.errors?.['pattern']){
          <div class="error">ูุบุฉ ุงูุงุฏุฎุงู ุงูุตุญูุญุฉ ูู ุงูุงูุฌููุฒูุฉ</div>
          }
        </div>

        <div class="col-12 col-lg-6">
          <label class="form-label">ูุตู ุงูุฎุฏูุฉ ุจุงูุนุฑุจู <span>*</span></label>
          <textarea rows="4" class="form-control" formControlName="arDescription"
            [class.invalid]="(submitted && editForm.get('arDescription')?.invalid) && editForm.get('arDescription')?.touched"></textarea>
          @if(editForm.get('arDescription')?.errors?.['pattern']){
          <div class="error">ูุบุฉ ุงูุงุฏุฎุงู ุงูุตุญูุญุฉ ูู ุงูุนุฑุจูุฉ</div>
          }
        </div>

        <div class="col-12 col-lg-6">
          <label class="form-label">ูุตู ุงูุฎุฏูุฉ ุจุงูุงูุฌููุฒู <span>*</span></label>
          <textarea rows="4" class="form-control" formControlName="enDescription"
            [class.invalid]="(submitted && editForm.get('enDescription')?.invalid) && editForm.get('enDescription')?.touched"></textarea>
          @if(editForm.get('enDescription')?.errors?.['pattern']){
          <div class="error">ูุบุฉ ุงูุงุฏุฎุงู ุงูุตุญูุญุฉ ูู ุงูุงูุฌููุฒูุฉ</div>
          }
        </div>

        <!-- โ ุงุฎุชูุงุฑ ููุน ุงูููุฏูุง -->
        <div class="col-12">
          <div class="media-type">
            <label class="radio">
              <input type="radio" formControlName="mediaType" value="image">
              <span>ุตูุฑุฉ</span>
            </label>

            <label class="radio">
              <input type="radio" formControlName="mediaType" value="video">
              <span>ููุฏูู</span>
            </label>
          </div>
          <div class="hint">ุงุฎุชุฑ ููุน ูุงุญุฏ ููุท (ุตูุฑุฉ ุฃู ููุฏูู).</div>
        </div>

        <!-- โ Input ูุงุญุฏ ููุท ุญุณุจ ุงูุงุฎุชูุงุฑ -->
        <div class="col-12">
          @if(editForm.get('mediaType')?.value === 'image'){
          <label class="dropzone">
            <input type="file" accept="image/*" (change)="onMediaSelected($event)">
            <div class="dz">
              <div class="dz-ic">๐ผ๏ธ</div>
              <div class="dz-txt">
                <strong>ุงุฎุชูุงุฑ ุตูุฑุฉ</strong>
                <span>JPG / PNG</span>
              </div>
            </div>
          </label>
          } @else {
          <label class="dropzone">
            <input type="file" accept="video/*" (change)="onMediaSelected($event)">
            <div class="dz">
              <div class="dz-ic">๐ฌ</div>
              <div class="dz-txt">
                <strong>ุงุฎุชูุงุฑ ููุฏูู</strong>
                <span>MP4 / MOV</span>
              </div>
            </div>
          </label>
          }
        </div>

        <div class="col-12 d-flex gap-2">
          <button class="btn btn-light" type="button" (click)="resetMedia()">ูุณุญ ุงูููุฏูุง</button>
          <button class="btn btn-primary" type="submit">ุญูุธ ุงูุชุนุฏููุงุช</button>
        </div>

      </div>
    </form>

    <!-- โ ุงูููุฏูุง ุชุญุช (ุงููุนุงููุฉ) -->
    <div class="card mt-3">
      <div class="card-head w-100">
        <h4>ุงููุนุงููุฉ</h4>
        <span class="hint">ุงููุฑูู ุงูุญุงูู ูุงูุฌุฏูุฏ</span>
      </div>

      <div class="preview-wrap">

        <!-- โ ูู ููู ูุนุงููุฉ ุฌุฏูุฏุฉ -->
        @if(mediaPreviewUrl){
        @if(previewKind === 'image'){
        <img class="preview-img" [src]="mediaPreviewUrl" alt="preview">
        } @else {
        <video class="preview-video" [src]="mediaPreviewUrl" controls></video>
        }
        }
        <!-- โ ูู ูููุด ุฌุฏูุฏ.. ุงุนุฑุถ ุงููุฏูู -->
        @else {
        @if(currntService && currntService.imagePaths.length){
        <img class="preview-img" [src]="url + '/' + currntService.imagePaths[0]" alt="current image">
        } @else {
        <div class="empty">ูุง ุชูุฌุฏ ููุฏูุง ูุนุฑุถูุง</div>
        }
        }

      </div>
    </div>

  </div>
</div>